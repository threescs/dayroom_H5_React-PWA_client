{"version":3,"sources":["../../../src/components/CategoryList/categoryList.js"],"names":["React","Component","string","number","shape","Query","classify","loadingIndicator","defaultClasses","CategoryTile","categoryListQuery","CategoryList","mapCategory","categoryItem","items","productImagePreview","map","item","small_image","url","render","id","classes","props","root","loading","error","data","fetchError","message","category","children","length","noResults","content","url_key","title","header"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,KAAzB,QAAsC,YAAtC;AACA,SAASC,KAAT;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,SAASC,gBAAT,QAAiC,iCAAjC;AACA,OAAOC,cAAP;AACA,OAAOC,YAAP;AACA,OAAOC,iBAAP;;AAEA,MAAMC,YAAN,SAA2BV,SAA3B,CAAqC;AAYjC;AACAW,EAAAA,WAAW,CAACC,YAAD,EAAe;AACtB,UAAM;AAAEC,MAAAA;AAAF,QAAYD,YAAY,CAACE,mBAA/B;AACA,6BACOF,YADP;AAEIE,MAAAA,mBAAmB,EAAE;AACjBD,QAAAA,KAAK,EAAEA,KAAK,CAACE,GAAN,CAAUC,IAAI,IAAI;AACrB,gBAAM;AAAEC,YAAAA;AAAF,cAAkBD,IAAxB;AACA,mCACOA,IADP;AAEIC,YAAAA,WAAW,EACP,OAAOA,WAAP,KAAuB,QAAvB,GACMA,WAAW,CAACC,GADlB,GAEMD;AALd;AAOH,SATM;AADU;AAFzB;AAeH;;AAEDE,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,QAAkB,KAAKC,KAA7B;AAEA,WACI;AAAK,MAAA,SAAS,EAAED,OAAO,CAACE;AAAxB,OACI,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEd,iBAAd;AAAiC,MAAA,SAAS,EAAE;AAAEW,QAAAA;AAAF;AAA5C,OACK,CAAC;AAAEI,MAAAA,OAAF;AAAWC,MAAAA,KAAX;AAAkBC,MAAAA;AAAlB,KAAD,KAA8B;AAC3B,UAAID,KAAJ,EAAW;AACP,eACI;AAAK,UAAA,SAAS,EAAEJ,OAAO,CAACM;AAAxB,iCACsB,iCAAMF,KAAK,CAACG,OAAZ,CADtB,CADJ;AAKH;;AACD,UAAIJ,OAAJ,EAAa;AACT,eAAOlB,gBAAP;AACH;;AACD,UAAIoB,IAAI,CAACG,QAAL,CAAcC,QAAd,CAAuBC,MAAvB,KAAkC,CAAtC,EAAyC;AACrC,eACI;AAAK,UAAA,SAAS,EAAEV,OAAO,CAACW;AAAxB,wCADJ;AAKH;;AACD,aACI;AAAK,QAAA,SAAS,EAAEX,OAAO,CAACY;AAAxB,SACKP,IAAI,CAACG,QAAL,CAAcC,QAAd,CAAuBf,GAAvB,CAA2BC,IAAI,IAC5B,oBAAC,YAAD;AACI,QAAA,IAAI,EAAE,KAAKL,WAAL,CAAiBK,IAAjB,CADV;AAEI,QAAA,GAAG,EAAEA,IAAI,CAACkB;AAFd,QADH,CADL,CADJ;AAUH,KA7BL,CADJ,CADJ;AAmCH;;AAtEgC;;gBAA/BxB,Y,eACiB;AACfU,EAAAA,EAAE,EAAElB,MADW;AAEfiC,EAAAA,KAAK,EAAElC,MAFQ;AAGfoB,EAAAA,OAAO,EAAElB,KAAK,CAAC;AACXoB,IAAAA,IAAI,EAAEtB,MADK;AAEXmC,IAAAA,MAAM,EAAEnC,MAFG;AAGXgC,IAAAA,OAAO,EAAEhC;AAHE,GAAD;AAHC,C;;AAwEvB,eAAeI,QAAQ,CAACE,cAAD,CAAR,CAAyBG,YAAzB,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { string, number, shape } from 'prop-types';\nimport { Query } from 'src/drivers';\nimport classify from 'src/classify';\nimport { loadingIndicator } from 'src/components/LoadingIndicator';\nimport defaultClasses from './categoryList.css';\nimport CategoryTile from './categoryTile';\nimport categoryListQuery from '../../queries/getCategoryList.graphql';\n\nclass CategoryList extends Component {\n    static propTypes = {\n        id: number,\n        title: string,\n        classes: shape({\n            root: string,\n            header: string,\n            content: string\n        })\n    };\n\n\n    // map Magento 2.3.1 schema changes to Venia 2.0.0 proptype shape to maintain backwards compatibility\n    mapCategory(categoryItem) {\n        const { items } = categoryItem.productImagePreview;\n        return {\n            ...categoryItem,\n            productImagePreview: {\n                items: items.map(item => {\n                    const { small_image } = item;\n                    return {\n                        ...item,\n                        small_image:\n                            typeof small_image === 'object'\n                                ? small_image.url\n                                : small_image\n                    };\n                })\n            }\n        };\n    }\n\n    render() {\n        const { id, classes } = this.props;\n\n        return (\n            <div className={classes.root}>\n                <Query query={categoryListQuery} variables={{ id }}>\n                    {({ loading, error, data }) => {\n                        if (error) {\n                            return (\n                                <div className={classes.fetchError}>\n                                    Data Fetch Error: <pre>{error.message}</pre>\n                                </div>\n                            );\n                        }\n                        if (loading) {\n                            return loadingIndicator;\n                        }\n                        if (data.category.children.length === 0) {\n                            return (\n                                <div className={classes.noResults}>\n                                    No child categories found.\n                                </div>\n                            );\n                        }\n                        return (\n                            <div className={classes.content}>\n                                {data.category.children.map(item => (\n                                    <CategoryTile\n                                        item={this.mapCategory(item)}\n                                        key={item.url_key}\n                                    />\n                                ))}\n                            </div>\n                        );\n                    }}\n                </Query>\n            </div>\n        );\n    }\n}\n\nexport default classify(defaultClasses)(CategoryList);\n"],"file":"categoryList.js"}